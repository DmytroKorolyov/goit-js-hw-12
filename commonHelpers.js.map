{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst refs = {\n  searchForm: document.querySelector('.search-form'),\n  wrapperPictures: document.querySelector('.pictures-list'),\n  loader: document.querySelector('.loader'),\n  loadBtn: document.querySelector('.load-btn'),\n};\n\nlet currentPage = 1;\nlet currentSearch = '';\nlet cardHeight = 0;\n\nrefs.searchForm.addEventListener('submit', onSubmitForm);\nrefs.loadBtn.addEventListener('click', onLoadMoreBtn);\n\nasync function onSubmitForm(e) {\n  e.preventDefault();\n  const symbol = e.target.elements.query.value;\n\n  refs.loader.style.display = 'inline-block';\n\n  try {\n    currentSearch = symbol;\n    const { data } = await getPicture(currentSearch, currentPage);\n    renderPictures(data.hits);\n\n    if (data.hits.length === 0) {\n      iziToast.error({\n        message: 'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n        backgroundColor: '#EF4040',\n        messageColor: '#FAFAFB',\n      });\n    } else {\n      cardHeight = getCardHeight();\n      smoothScroll();\n    }\n  } catch (error) {\n    console.error(error);\n  } finally {\n    refs.loader.style.display = 'none';\n    smoothScroll();\n  }\n\n  e.target.reset();\n}\n\nasync function onLoadMoreBtn() {\n  currentPage += 1;\n  showLoader();\n\n  try {\n    const { data } = await getPicture(currentSearch, currentPage);\n\n    if (data.hits.length === 0) {\n      showEndMessage();\n    } else {\n      appendPictures(data.hits);\n      cardHeight = getCardHeight();\n      smoothScroll();\n    }\n  } catch (error) {\n    console.error(error);\n  } finally {\n    hideLoader();\n    smoothScroll();\n  }\n}\n\nfunction showLoader() {\n  refs.loader.style.display = 'inline-block';\n}\n\nfunction hideLoader() {\n  refs.loader.style.display = 'none';\n}\n\nasync function getPicture(symbol, page) {\n  const API_KEY = '42004606-5d03e591d800e1e125ea1f7b1';\n  const BASE_URL = 'https://pixabay.com';\n  const END_POINT = '/api/';\n  const params = {\n    key: API_KEY,\n    q: symbol,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: page,\n    per_page: 40,\n  };\n  const url = `${BASE_URL}${END_POINT}?${new URLSearchParams(params)}`;\n\n  return axios.get(url);\n}\n\nfunction pictureTemplate({\n  webformatURL,\n  largeImageURL,\n  tags,\n  likes,\n  views,\n  comments,\n  downloads,\n}) {\n  return `<li class=\"gallery-card\">\n    <a class=\"gallary-card-link\" href=\"${largeImageURL}\">\n      <img src=\"${webformatURL}\" alt=\"${tags}\" />\n      <ul class=\"image-info\">\n        <li class=\"image-item-info\">\n          <p>Likes</p>\n          <p>${likes}</p>\n        </li>\n        <li class=\"image-item-info\">\n          <p>Views</p>\n          <p>${views}</p>\n        </li>\n        <li class=\"image-item-info\">\n          <p>Comments</p>\n          <p>${comments}</p>\n        </li>\n        <li class=\"image-item-info\">\n          <p>Downloads</p>\n          <p>${downloads}</p>\n        </li>\n      </ul>\n    </a>\n  </li>`;\n}\n\nfunction picturesTemplate(pictures) {\n  return pictures.map(pictureTemplate).join('');\n}\n\nfunction renderPictures(pictures) {\n  refs.wrapperPictures.innerHTML = picturesTemplate(pictures);\n  initializeLightbox();\n  smoothScroll();\n}\n\nfunction appendPictures(pictures) {\n  refs.wrapperPictures.innerHTML += picturesTemplate(pictures);\n  initializeLightbox();\n  smoothScroll();\n}\n\nfunction showEndMessage() {\n  iziToast.info({\n    title: '',\n    message: \"We're sorry, but you've reached the end of search results.\",\n    position: 'topRight',\n    backgroundColor: '#3498db',\n    messageColor: '#ffffff',\n  });\n  hideLoadBtn();\n  smoothScroll();\n}\n\nfunction hideLoadBtn() {\n  refs.loadBtn.style.display = 'none';\n}\n\nfunction getCardHeight() {\n  const galleryItem = document.querySelector('.gallery-card');\n  const { height } = galleryItem.getBoundingClientRect();\n  return height;\n}\n\nfunction smoothScroll() {\n  const scrollHeight = currentPage * cardHeight;\n  window.scrollBy({\n    top: scrollHeight,\n    behavior: 'smooth',\n  });\n}\n\nfunction initializeLightbox() {\n  const lightbox = new SimpleLightbox('.gallery-card a.gallary-card-link', {\n    captionDelay: 250,\n    captionsData: 'alt',\n  });\n  lightbox.refresh();\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// // Описаний у документації\n// import iziToast from \"izitoast\";\n// // Додатковий імпорт стилів\n// import \"izitoast/dist/css/iziToast.min.css\";\n// // Описаний у документації\n// import SimpleLightbox from \"simplelightbox\";\n// // Додатковий імпорт стилів\n// import \"simplelightbox/dist/simple-lightbox.min.css\";\n// // Додав новий імпорт Axios\n// import axios from 'axios';\n\n// const refs = {\n//   searchForm: document.querySelector('.search-form'),\n//   wrapperPictures: document.querySelector('.pictures-list'),\n//   loader: document.querySelector('.loader'),\n// };\n\n// refs.searchForm.addEventListener('submit', onSubmitForm);\n\n// async function onSubmitForm(e) {\n//   e.preventDefault();\n//   const symbol = e.target.elements.query.value;\n\n//   refs.loader.style.display = 'inline-block';\n\n//   try {\n//     const data = await getPicture(symbol);\n//     renderPictures(data.hits);\n\n//     if (data.hits.length === 0) {\n//       iziToast.error({\n//         message: 'Sorry, there are no images matching your search query. Please try again!',\n//         position: 'topRight',\n//         backgroundColor: '#EF4040',\n//         messageColor: '#FAFAFB',\n//       });\n//     }\n//   } catch (error) {\n//     console.error(error);\n//   } finally {\n//     refs.loader.style.display = 'none';\n//   }\n\n//   e.target.reset();\n// }\n\n// async function getPicture(symbol) {\n//   const API_KEY = '42004606-5d03e591d800e1e125ea1f7b1';\n//   const BASE_URL = 'https://pixabay.com';\n//   const END_POINT = '/api/';\n\n//   try {\n//     const response = await axios.get(`${BASE_URL}${END_POINT}`, {\n//       params: {\n//         key: API_KEY,\n//         q: symbol,\n//         image_type: 'photo',\n//         orientation: 'horizontal',\n//         safesearch: true,\n//       },\n//     });\n\n//     if (response.status === 200) {\n//       return response.data;\n//     } else {\n//       throw new Error('Unexpected response from server');\n//     }\n//   } catch (error) {\n//     throw new Error('Error fetching data from server');\n//   }\n// }\n\n// function pictureTemplate({\n//   webformatURL,\n//   largeImageURL,\n//   tags,\n//   likes,\n//   views,\n//   comments,\n//   downloads,\n// }) {\n//   return `<li class=\"gallery-card\">\n//     <a class=\"gallary-card-link\" href=\"${largeImageURL}\">\n//       <img src=\"${webformatURL}\" alt=\"${tags}\" />\n//       <ul class=\"image-info\">\n//         <li class=\"image-item-info\">\n//           <p>Likes</p>\n//           <p>${likes}</p>\n//         </li>\n//         <li class=\"image-item-info\">\n//           <p>Views</p>\n//           <p>${views}</p>\n//         </li>\n//         <li class=\"image-item-info\">\n//           <p>Comments</p>\n//           <p>${comments}</p>\n//         </li>\n//         <li class=\"image-item-info\">\n//           <p>Downloads</p>\n//           <p>${downloads}</p>\n//         </li>\n//       </ul>\n//     </a>\n//   </li>`;\n// }\n\n// function picturesTemplate(pictures) {\n//   return pictures.map(pictureTemplate).join('');\n// }\n\n// function renderPictures(pictures) {\n//   const markup = picturesTemplate(pictures);\n//   refs.wrapperPictures.innerHTML = markup;\n\n//   const lightbox = new SimpleLightbox('.gallery-card a.gallary-card-link', {\n//     captionDelay: 250,\n//     captionsData: 'alt',\n//   });\n//   lightbox.refresh();\n// }\n\n"],"names":["refs","currentPage","currentSearch","cardHeight","onSubmitForm","onLoadMoreBtn","symbol","data","getPicture","renderPictures","iziToast","getCardHeight","smoothScroll","error","showLoader","showEndMessage","appendPictures","hideLoader","page","API_KEY","BASE_URL","END_POINT","params","url","axios","pictureTemplate","webformatURL","largeImageURL","tags","likes","views","comments","downloads","picturesTemplate","pictures","initializeLightbox","hideLoadBtn","galleryItem","height","scrollHeight","SimpleLightbox"],"mappings":"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"}